"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var cheerio=require("cheerio"),fs=require("fs").promises,axios=require("axios");function extractCardData(i){var e,r,c,n,a;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i("#basic-info-table"),r={name:e.find("tr:nth-child(1) td:nth-child(2)").text(),stage:e.find("tr:nth-child(2) td:nth-child(2)").text().trim(),type:e.find("tr:nth-child(3) td:nth-child(2)").text().trim(),hp:parseInt(e.find("tr:nth-child(4) td:nth-child(2)").text()),weakness:e.find("tr:nth-child(5) td:nth-child(2)").text().trim(),retreat:e.find("tr:nth-child(6) td:nth-child(2) img").length,rarity:e.find("tr:nth-child(7) td:nth-child(2) img").attr("alt"),set:e.find("tr:nth-child(8) td:nth-child(2) a").text(),illustrator:e.find("tr:nth-child(9) td:nth-child(2)").text()},c=[],i(".moves-div").each(function(t,e){var r=i(e).find("table"),n={name:r.find("tr:nth-child(1) td:nth-child(2)").text(),energyRequired:r.find("tr:nth-child(2) td:nth-child(2) img").length,damage:parseInt(r.find("tr:nth-child(3) td:nth-child(2)").text())||0,effect:r.find("tr:nth-child(4) td:nth-child(2)").text()||""};c.push(n)}),n=i("#pokedex-table"),a={number:parseInt(n.find("tr:nth-child(1) td:nth-child(2)").text()),species:n.find("tr:nth-child(2) td:nth-child(2)").text(),height:10*parseFloat(n.find("tr:nth-child(3) td:nth-child(2)").text().replace(/[^0-9.]/g,"")),weight:10*parseFloat(n.find("tr:nth-child(4) td:nth-child(2)").text().replace(/[^0-9.]/g,"")),description:n.find("tr:nth-child(5) td:nth-child(2)").text().trim()},t.abrupt("return",{basicInfo:r,moves:c,pokedexInfo:a});case 7:case"end":return t.stop()}})}function scrapeCards(){var e,r,n,i,c,a,d;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:e=[],r=[],n=1;case 3:if(n<=215)return t.prev=4,console.log("Scraping card ".concat(n,"/215...")),i="https://gamevlg.com/pokemon-tcg-pocket/cards/".concat(n),t.next=9,regeneratorRuntime.awrap(axios.get(i));t.next=26;break;case 9:return c=t.sent,a=cheerio.load(c.data),t.next=13,regeneratorRuntime.awrap(extractCardData(a));case 13:return d=t.sent,e.push(_objectSpread({id:n},d)),t.next=17,regeneratorRuntime.awrap(new Promise(function(t){return setTimeout(t,1e3)}));case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(4),console.error("Error scraping card ".concat(n,":"),t.t0.message),r.push({id:n,error:t.t0.message});case 23:n++,t.next=3;break;case 26:return t.next=28,regeneratorRuntime.awrap(fs.writeFile("cards.json",JSON.stringify(e,null,2)));case 28:if(0<r.length)return t.next=31,regeneratorRuntime.awrap(fs.writeFile("errors.json",JSON.stringify(r,null,2)));t.next=31;break;case 31:console.log("Scraping completed! Total cards: ".concat(e.length)),0<r.length&&console.log("Errors encountered: ".concat(r.length));case 33:case"end":return t.stop()}},null,null,[[4,19]])}scrapeCards().catch(console.error);
//# sourceMappingURL=card-scraper.min.js.map
